swagger: '2.0'
info:
  description: 'IdentityChain Agent REST API'
  title: IdentityChain API
  version: '0.0.1'
host: localhost:8000
schemes:
- http
consumes:
  - application/json
parameters:
  userParam:
    name: user
    in: path
    description: A unique id (or 'me') value identifying this user.
    type: string
    required: true
  walletParam:
    name: wallet
    in: path
    description: A unique id value identifying this wallet.
    type: string
    required: true
securityDefinitions:
  basic:
    type: basic
paths:
  /api/credential/:
        post:
          consumes:
          - application/json
          parameters:
          - in: body
            name: data
            schema:
              properties:
                wallet:
                  description: A unique string value identifying a wallet
                  type: string
                encryptedCredential:
                  description: The authcrypted credential offer id
                  type: string
                connectionDid:
                  description: A did representing the issuer of the credential
                  type: string
              required:
              - wallet
              - encryptedCredential
              - connectionDid
              type: object
          responses:
            '201':
              description: ''
          tags:
          - credential
  /api/credential/{id}/:
    delete:
      operationId: credential_delete
      parameters:
      - description: A unique string value identifying this credential.
        in: path
        name: id
        required: true
        type: string
      responses:
        '204':
          description: ''
      tags:
      - credential
    get:
      operationId: credential_read
      parameters:
      - description: A unique string value identifying this credential.
        in: path
        name: id
        required: true
        type: string
      responses:
        '200':
          description: ''
      tags:
      - credential
  /api/credentialissue/:
      post:
        consumes:
        - application/json
        parameters:
        - in: body
          name: data
          schema:
            properties:
              wallet:
                description: A unique string value identifying a wallet
                type: string
              encryptedCredentialRequest:
                description: 'The authcrypted Credential Request'
                type: string
              values:
                description: Object containing attributes defined in schema as key-value pairs (e.g. {"attrName":"attrValue", "attrName1":"attrValue1"})
                type: object
            required:
            - wallet
            - encryptedCredentialRequest
            - values
            type: object
        responses:
          '201':
            description: ''
        tags:
        - credentialissue
  /api/credentialdef/:
    get:
      operationId: credentialdef_list
      parameters: []
      responses:
        '200':
          description: ''
      tags:
      - credentialdef
    post:
      consumes:
      - application/json
      operationId: credentialdef_create
      parameters:
      - in: body
        name: data
        schema:
          properties:
            schema:
              description: A unique name of the schema
              type: string
            wallet:
              description: version for schema
              type: string
            supportRevocation:
              description: States if revocation should be supported for this credential definiton
              type: boolean
          required:
          - schema, wallet
          type: object
      responses:
        '201':
          description: ''
      tags:
      - credentialdef
  /api/credentialdef/{creddef}/:
    delete:
      operationId: credentialdef_delete
      parameters:
      - description: A unique string value identifying this credential definition.
        in: path
        name: creddef
        required: true
        type: string
      - description: A unique string value identifying the wallet to be used.
        in: header
        name: wallet
        required: true
        type: string
      responses:
        '204':
          description: ''
      tags:
      - credentialdef
    get:
      operationId: credentialdef_read
      parameters:
      - description: A unique string value identifying this credential definition.
        in: path
        name: credDefId
        required: true
        type: string
      - description: A unique string value identifying the wallet to be used.
        in: header
        name: wallet
        required: true
        type: string
      responses:
        '200':
          description: ''
      tags:
      - credentialdef
  /api/credentialoffer/:
    get:
      operationId: credentialoffer_list
      parameters: []
      responses:
        '200':
          description: ''
      tags:
      - credentialoffer
    post:
      consumes:
      - application/json
      operationId: credentialoffer_create
      parameters:
      - in: body
        name: data
        schema:
          properties:
            holderDid:
              description: ''
              type: string
            credDefId:
              description: ''
              type: string
            wallet:
              description: ''
              type: string
          required:
          - holderDid
          - credDefId
          - wallet
          type: object
      responses:
        '201':
          description: ''
      tags:
      - credentialoffer
  /api/credentialoffer/{id}/:
    delete:
      operationId: credentialoffer_delete
      parameters:
      - description: A unique integer value identifying this credential offer.
        in: path
        name: id
        required: true
        type: string
      responses:
        '204':
          description: ''
      tags:
      - credentialoffer
    get:
      operationId: credentialoffer_read
      parameters:
      - description: A unique integer value identifying this credential offer.
        in: path
        name: id
        required: true
        type: string
      responses:
        '200':
          description: ''
      tags:
      - credentialoffer
  /api/credentialrequest/:
    get:
      operationId: credentialrequest_list
      parameters: []
      responses:
        '200':
          description: ''
      tags:
      - credentialrequest
    post:
      consumes:
      - application/json
      operationId: credentialrequest_create
      parameters:
      - in: body
        name: data
        schema:
          properties:
            encryptedCredentialOfferId:
              description: auth crypted credential offer id
            encryptedCredentialOffer:
              description: 'auth crypted credential offer'
              type: string
            wallet:
              description: 'wallet name of wallet to be used'
              type: string
          required:
          - encryptedCredentialOfferId
          - encryptedCredentialOffer
          - wallet
          type: object
      responses:
        '201':
          description: ''
      tags:
      - credentialrequest
  /api/credentialrequest/{id}/:
    delete:
      operationId: credentialrequest_delete
      parameters:
      - description: A unique integer value identifying this credential request.
        in: path
        name: id
        required: true
        type: string
      responses:
        '204':
          description: ''
      tags:
      - credentialrequest
    get:
      operationId: credentialrequest_read
      parameters:
      - description: A unique integer value identifying this credential request.
        in: path
        name: id
        required: true
        type: string
      responses:
        '200':
          description: ''
      tags:
      - credentialrequest
  /api/connection/:
    post:
      summary: Accept a connection offer
      description: Accept a connection offer
      parameters:
      - in: body
        name: data
        schema:
          properties:
            wallet:
              description: 'Wallet to use for accepting the connection offer'
              type: string
            endpoint:
              description: 'Endpoint for communication with accepting user'
              type: string
            connectionOffer:
              description: 'The connection offer object'
              type: object
          required:
          - wallet
          - connection_offer
          type: object
      responses:
        '200':
          description: 'Success'
      tags:
      - connection
  /api/connectionoffer/:
    post:
      summary: Create a new connection offer
      description: Create a new connection offer
      parameters:
      - in: body
        name: data
        schema:
          properties:
            wallet:
              description: 'Wallet to use for creating the connection offer'
              type: string
            endpoint:
              description: 'Response endpoint for connection response'
              type: string
            role:
              description: 'Role offered to the connection invitee'
              type: string
              enum:
              - NONE
              - TRUSTEE
              - STEWARD
              - TRUST_ANCHOR
          required:
          - wallet
          type: object
      responses:
        '201':
          description: ''
      tags:
      - connectionoffer
  /api/endpoint/:
    post:
      description: Agent endpoint
      summary: Agent endpoint
      parameters:
      - in: body
        name: data
        schema:
          properties:
            type:
              description: 'Message encryption type'
              type: string
              default: anon
              enum:
              - anon
              - auth
            target:
              description: 'Reason for the message'
              type: string
              enum:
              - accept_connection
            ref:
              description: 'A reference value, e.g. nonce'
              type: string
            message:
              description: 'Encrypted message string'
              type: string
            signature:
              description: 'Message Signature'
              type: string
          required:
          - target
          - ref
          - message
          - signature
          type: object
      responses:
        '200':
          description: ''
      tags:
      - endpoint
  /api/proof/:
    get:
      operationId: proof_list
      parameters: []
      responses:
        '200':
          description: ''
      tags:
      - proof
    post:
      consumes:
      - application/json
      operationId: proof_create
      parameters:
      - in: body
        name: data
        schema:
          properties:
            proof_obj:
              description: ''
              type: string
          required:
          - proof_obj
          type: object
      responses:
        '201':
          description: ''
      tags:
      - proof
  /api/proof/{id}/:
    delete:
      operationId: proof_delete
      parameters:
      - description: A unique integer value identifying this proof.
        in: path
        name: id
        required: true
        type: integer
      responses:
        '204':
          description: ''
      tags:
      - proof
    get:
      operationId: proof_read
      parameters:
      - description: A unique integer value identifying this proof.
        in: path
        name: id
        required: true
        type: integer
      responses:
        '200':
          description: ''
      tags:
      - proof

  /api/schema/:
    get:
      operationId: schema_list
      parameters: []
      responses:
        '200':
          description: ''
      tags:
      - schema
    post:
      consumes:
      - application/json
      operationId: schema_create
      parameters:
      - in: body
        name: data
        schema:
          properties:
            name:
              description: A unique name of the schema
              type: string
            version:
              description: version for schema
              type: string
            attrNames:
              description: list of attribute names put into the schema
              type: array
              items:
               type: string
            wallet:
              description: A unique value identifying this wallet
              type: string
          required:
          - name, version, attrNames, wallet
          type: object
      responses:
        '201':
          description: ''
      tags:
      - schema
  /api/schema/{schemaid}/:
    delete:
      operationId: schema_delete
      parameters:
      - description: A unique string value identifying this schema.
        in: path
        name: schemaid
        required: true
        type: string
      - description: A unique value identifying this wallet.
        in: header
        name: wallet
        required: true
        type: string
      responses:
        '204':
          description: ''
      tags:
        - schema
    get:
      operationId: schema_read
      parameters:
      - description: A unique string value identifying this schema.
        in: path
        name: schemaid
        required: true
        type: string
      - description: A unique value identifying this wallet.
        in: header
        name: wallet
        required: true
        type: string
      responses:
        '200':
          description: ''
      tags:
        - schema
  /api/user/:
    post:
      summary: Register a new user
      description: Register a new user
      parameters:
      - in: body
        name: data
        schema:
          properties:
            username:
              description: 'Required.'
              type: string
            password:
              description: 'Required.'
              type: string
          required:
          - username
          - password
          type: object
      responses:
        '201':
          description: User successfully created
          headers:
            Location:
              description: Path to created user, e.g. /users/userId
              type: string
      tags:
      - user
  /api/user/{user}/:
    get:
      summary: Retrieve a user
      description: Retrieve a user
      parameters:
        - $ref: '#/parameters/userParam'
      responses:
        '200':
          description: 'Success'
      tags:
      - user
    post:
      summary: Update a User
      description: Update a User (at least one of the properties must be provided)
      parameters:
      - $ref: '#/parameters/userParam'
      - in: body
        name: data
        schema:
          properties:
            username:
              description: ''
              type: string
            password:
              description: ''
              type: string
          type: object
      responses:
        '501':
          description: 'Not yet implemented'
      tags:
      - user
    delete:
      summary: Delete a User
      description: Delete a User
      parameters:
      - $ref: '#/parameters/userParam'
      responses:
        '204':
          description: ''
      tags:
      - user
  /api/wallet/:
    get:
      summary: List all wallets of user
      description: List all wallets of user
      parameters: []
      responses:
        '200':
          description: ''
      tags:
      - wallet
    post:
      summary: Create a new Wallet (optionally with given name and settings)
      description: Create a new Wallet (optionally with given name and settings)
      parameters:
      - in: body
        name: data
        schema:
          properties:
            name:
              description: 'Wallet name, must be globally unique. Automatically generated if none is provided.'
              type: string
            config:
              description: 'Wallet Config JSON. Supported keys vary by wallet type. A default config will be used if none is provided.'
              type: string
            credentials:
              description: 'Wallet Credentials JSON. Supported keys vary by wallet type. A default config will be used if none is provided.'
              type: string
            poolName:
              description: 'Name of the Pool to associate with this wallet. A default config will be used if none is provided.'
              type: string
            seed:
              description: 'Seed to use for initial did creation.'
              type: string
            xtype:
              description: 'Type of the wallet. A default config will be used if none is provided.'
              type: string
          type: object
      responses:
        '201':
          description: ''
      tags:
      - wallet
  /api/wallet/{wallet}/:
    get:
      summary: Retrieve a Wallet.
      description: Retrieve a Wallet.
      parameters:
      - $ref: '#/parameters/walletParam'
      responses:
        '200':
          description: ''
      tags:
      - wallet
    delete:
      summary: Delete a Wallet
      description: Delete a Wallet
      parameters:
      - $ref: '#parameters/walletParam'
      responses:
        '204':
          description: ''
      tags:
      - wallet
